(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){e.exports=a(444)},182:function(e,t){},184:function(e,t){},205:function(e,t){},208:function(e,t){},303:function(e,t){},436:function(e,t,a){},440:function(e,t,a){},441:function(e,t){e.exports={KERNEL_ADDRESS:"0x0F99bE6639B1DdFbEdf319B4de67E558a41AA6eA",KERNEL_ABI:[{constant:!1,inputs:[],name:"stop",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_orderHash",type:"bytes32"},{name:"_value",type:"uint256"},{name:"_signature",type:"bytes"}],name:"repay",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"owner_",type:"address"}],name:"setOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_orderHash",type:"bytes32"}],name:"getExpectedRepayValue",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_config",type:"address"}],name:"setConfig",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"kyberConnector",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"isDefaulted",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_account",type:"address"}],name:"getOrdersForAccount",outputs:[{name:"",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_orderHash",type:"bytes32"}],name:"getOrder",outputs:[{name:"_account",type:"address"},{name:"_byUser",type:"address"},{name:"_principalToken",type:"address"},{name:"_collateralToken",type:"address"},{name:"_principalAmount",type:"uint256"},{name:"_collateralAmount",type:"uint256"},{name:"_premium",type:"uint256"},{name:"_expirationTimestamp",type:"uint256"},{name:"_salt",type:"uint256"},{name:"_fee",type:"uint256"},{name:"_createdTimestamp",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"accountFactory",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_kyberConnector",type:"address"}],name:"setKyberConnector",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"accountToOrders",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"stopped",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"config",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"authority_",type:"address"}],name:"setAuthority",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getAllOrders",outputs:[{name:"",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"isRepaid",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"isOrder",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_feeWallet",type:"address"}],name:"setFeeWallet",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_reserve",type:"address"}],name:"setReserve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"orders",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_orderHash",type:"bytes32"},{name:"_principalPerCollateral",type:"uint256"}],name:"process",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_accountFactory",type:"address"}],name:"setAccountFactory",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"start",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"authority",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_orderAddresses",type:"address[4]"},{name:"_orderValues",type:"uint256[6]"},{name:"_signature",type:"bytes"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_escrow",type:"address"}],name:"setEscrow",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"hashToOrder",outputs:[{name:"account",type:"address"},{name:"byUser",type:"address"},{name:"principalToken",type:"address"},{name:"collateralToken",type:"address"},{name:"principalAmount",type:"uint256"},{name:"collateralAmount",type:"uint256"},{name:"premium",type:"uint256"},{name:"duration",type:"uint256"},{name:"expirationTimestamp",type:"uint256"},{name:"salt",type:"uint256"},{name:"fee",type:"uint256"},{name:"createdTimestamp",type:"uint256"},{name:"orderHash",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"reserve",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"escrow",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"feeWallet",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"VERSION",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_escrow",type:"address"},{name:"_accountFactory",type:"address"},{name:"_reserve",type:"address"},{name:"_feeWallet",type:"address"},{name:"_config",type:"address"},{name:"_kyberConnector",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"orderHash",type:"bytes32"},{indexed:!0,name:"account",type:"address"},{indexed:!0,name:"principalToken",type:"address"},{indexed:!1,name:"collateralToken",type:"address"},{indexed:!1,name:"byUser",type:"address"},{indexed:!1,name:"principalAmount",type:"uint256"},{indexed:!1,name:"collateralAmount",type:"uint256"},{indexed:!1,name:"premium",type:"uint256"},{indexed:!1,name:"expirationTimestamp",type:"uint256"},{indexed:!1,name:"fee",type:"uint256"}],name:"LogOrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"orderHash",type:"bytes32"},{indexed:!1,name:"valueRepaid",type:"uint256"}],name:"LogOrderRepaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"orderHash",type:"bytes32"},{indexed:!1,name:"reason",type:"string"}],name:"LogOrderDefaulted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"methodSig",type:"string"},{indexed:!1,name:"errMsg",type:"string"}],name:"LogError",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"bytes32Value",type:"bytes32"},{indexed:!1,name:"methodSig",type:"string"},{indexed:!1,name:"errMsg",type:"string"}],name:"LogErrorWithHintBytes32",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"addressValue",type:"address"},{indexed:!1,name:"methodSig",type:"string"},{indexed:!1,name:"errMsg",type:"string"}],name:"LogErrorWithHintAddress",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"authority",type:"address"}],name:"LogSetAuthority",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"}],name:"LogSetOwner",type:"event"},{anonymous:!0,inputs:[{indexed:!0,name:"sig",type:"bytes4"},{indexed:!0,name:"guy",type:"address"},{indexed:!0,name:"foo",type:"bytes32"},{indexed:!0,name:"bar",type:"bytes32"},{indexed:!1,name:"wad",type:"uint256"},{indexed:!1,name:"fax",type:"bytes"}],name:"LogNote",type:"event"}],TOKEN_DATA:{"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359":{Symbol:"DAI",Decimals:18},"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2":{Symbol:"WETH",Decimals:18},"0x0D8775F648430679A709E98d2b0Cb6250d2887EF":{Symbol:"BAT",Decimals:18},"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2":{Symbol:"MKR",Decimals:18},"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599":{Symbol:"WBTC",Decimals:8},"0xE41d2489571d322189246DaFA5ebDe1F4699F498":{Symbol:"ZRX",Decimals:18},"0x1985365e9f78359a9B6AD760e32412f4a445E862":{Symbol:"REP",Decimals:18},"0xdd974D5C2e2928deA5F71b9825b8b646686BD200":{Symbol:"KNC",Decimals:18}}}},442:function(e,t,a){},443:function(e,t){e.exports={URL:"https://mainnet.infura.io/v3/33937fa262604241ab7063af759c81e5"}},444:function(e,t,a){"use strict";a.r(t);var n=a(158),s=a(159),r=a(163),i=a(160),o=a(51),p=a(164),u=a(1),l=a.n(u),c=a(161),y=a(28),m=a.n(y),d=a(29),b=a.n(d),f=a(77),h=(a(436),a(162));a(439),a(440);var x=function(e){e.app;var t=[];e.orders.forEach(function(e){t.push({account:e.account,user:e.user,created:e.createdTime,expires:e.expirationTime,collateralToken:e.collateralToken,collateralAmount:e.collateralAmount,principalToken:e.principalToken,principalAmount:e.principalAmount,premium:(100*e.premium).toFixed(2)+"%",status:e.status})});var a=[{Header:"User",accessor:"user",maxWidth:100,Cell:function(e){return l.a.createElement("a",{href:"https://etherscan.com/address/"+e.value,target:"_blank",rel:"noopener noreferrer"},e.value)}},{Header:"Account",accessor:"account",maxWidth:100,Cell:function(e){return l.a.createElement("a",{href:"https://etherscan.com/address/"+e.value,target:"_blank",rel:"noopener noreferrer"},e.value)}},{Header:"Created",accessor:"created",className:"center"},{Header:"Collateral",accessor:"collateralAmount",className:"right"},{Header:"Token",accessor:"collateralToken"},{Header:"Principal",accessor:"principalAmount",className:"right"},{Header:"Token",accessor:"principalToken"},{Header:"Premium",accessor:"premium",maxWidth:100,className:"right"},{Header:"Expires",accessor:"expires",className:"center"},{Header:"Status",accessor:"status",maxWidth:100,Cell:function(e){return l.a.createElement("span",null,l.a.createElement("span",{style:{color:"Repaid"===e.value?"#3498db":"Active"===e.value?"#62cb31":"Default"===e.value?"#e74c3c":"#383838"}},"\u25cf")," ",e.value)}}];return l.a.createElement("div",{className:"OrdersTable"},l.a.createElement(h.a,{data:t,columns:a,showPageSizeOptions:!1,className:"-striped",resizable:!1}))};var v,E=function(e){return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("a",{href:"https://github.com/conlan/nuo-stats",target:"_blank",rel:"noopener noreferrer"},"Github")," ","|"," ",l.a.createElement("a",{href:"https://app.nuo.network",target:"_blank",rel:"noopener noreferrer"},"Nuo")))},g=a(441),A="",_=null,w=null,k="",M={},T={},D=" ",C="";function O(e){return g.TOKEN_DATA[e].Symbol}function S(e){return g.TOKEN_DATA[e].Decimals}function F(){var e=[],t=[];Object.keys(M).forEach(function(a){e.push(M[a].toFixed(4)),e.push(" "),e.push(a),e.push(" - "),t.push(T[a].toFixed(4)),t.push(" "),t.push(a),t.push(" - ")}),e.length>0&&delete e[e.length-1],t.length>0&&delete t[t.length-1],D=e.join(""),C=t.join("")}function N(e){var t=new Date(1e3*e),a=t.getMonth()+1;a<10&&(a="0"+a);var n=t.getDate();return n<10&&(n="0"+n),a+"-"+n+"-"+t.getFullYear()}function R(){return(R=Object(f.a)(b.a.mark(function e(){var t,a,n,s,r,i,o,p,u,l,c,y,m,d,f,h,x;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new _.eth.Contract(g.KERNEL_ABI,g.KERNEL_ADDRESS),e.next=3,t.methods.getAllOrders().call();case 3:(a=e.sent).reverse(),console.log("Received "+a.length+" orders"),v=[],n=0;case 8:if(!(n<a.length)){e.next=36;break}return s=a[n],k="(State = fetching order "+(n+1)+" / "+a.length+")",e.next=13,t.methods.getOrder(s).call();case 13:if(r=e.sent,A="("+n+" / "+a.length+")",i=r._createdTimestamp,o=N(i),p=r._expirationTimestamp,u=N(p),l=r._collateralToken,c=S(l),y=parseFloat((r._collateralAmount/Math.pow(10,c)).toFixed(4)),m=r._principalToken,d=O(m),f=S(m),h=parseFloat((r._principalAmount/Math.pow(10,f)).toFixed(4)),x=r._premium/1e17,d in M==0&&(M[d]=0,T[d]=0),v.push({id:s,account:r._account,user:r._byUser,collateralAmount:y,collateralToken:O(l),createdTime:o,expirationTime:u,rawExpirationTime:p,premium:x,principalAmount:h,principalToken:d,status:"-",isActive:!1}),w.setState({}),console.log(r),!(n>15)){e.next=33;break}return e.abrupt("break",36);case 33:n++,e.next=8;break;case 36:k="",w.setState({}),L();case 39:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(b.a.mark(function e(){var t,a,n,s,r,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new _.eth.Contract(g.KERNEL_ABI,g.KERNEL_ADDRESS),a=0;case 2:if(!(a<v.length)){e.next=19;break}return n=v[a],k="(State = fetching repay status "+(a+1)+" / "+v.length+")",e.next=7,t.methods.isRepaid(n.id).call();case 7:if(s=e.sent,r=!1,!1!==s){e.next=13;break}return e.next=12,t.methods.isDefaulted(n.id).call();case 12:r=e.sent;case 13:n.status=s?"Repaid":r?"Default":"Active",0==s&&0==r&&(M[n.principalToken]=M[n.principalToken]+n.principalAmount,i=n.premium*n.principalAmount,T[n.principalToken]=T[n.principalToken]+i,F()),w.setState({});case 16:a++,e.next=2;break;case 19:k="",w.setState({});case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}var B=function(e){w=e.app;var t=Object(y.useWeb3Context)();return void 0===t.connectorName?void 0===window.web3?t.setConnector("Infura"):t.setConnector("MetaMask"):null===_&&(_=t.library,function(){R.apply(this,arguments)}()),void 0===v?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Reserves")),l.a.createElement("p",null,l.a.createElement("b",null,"Loans")),l.a.createElement("p",null,"Loading Loans... ",A),l.a.createElement(E,null)):l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Reserves")),l.a.createElement("p",{className:"center"},l.a.createElement("b",null,"Total Active Loans:")),l.a.createElement("p",{className:"center"},D),l.a.createElement("p",{className:"center"},l.a.createElement("b",null,"Expected Premium Repay:")),l.a.createElement("p",{className:"center"},C),l.a.createElement("p",{className:"center"},l.a.createElement("i",null,k)),l.a.createElement(x,{orders:v}),l.a.createElement(E,null))},j=(a(442),a(443)),W=y.Connectors.MetaMaskConnector,K=y.Connectors.NetworkOnlyConnector,I={MetaMask:new W,Infura:new K({providerURL:j.URL})},U=null,P=function(e){function t(){var e;return Object(n.a)(this,t),e=Object(r.a)(this,Object(i.a)(t).call(this)),U=Object(o.a)(e),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(m.a,{connectors:I,libraryName:"web3.js"},l.a.createElement(B,{app:U}))}}]),t}(u.Component),V=document.getElementById("root");Object(c.render)(l.a.createElement(P,null),V)}},[[165,1,2]]]);
//# sourceMappingURL=main.c027b1f8.chunk.js.map